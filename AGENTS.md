# Repository Guidelines

## Project Structure & Modules
- Root: `firebase.json` (emulators/deploy), `firestore.rules`, `CHANGELOG.md`.
- `frontend/`: Vite + React (TypeScript). Build output goes to root `public/`. OpenAPI client is generated by Orval to `src/lib/api.generated.ts`.
- `functions/`: Firebase Functions (TypeScript). Entry `src/index.ts`, compiled to `lib/`. Orval generates `src/api.generated.ts`.

## Build, Test, and Development
- Toolchain: `mise install` to pin Node/Bun. Install deps: `bun install --cwd frontend --frozen-lockfile` and `bun install --cwd functions --frozen-lockfile`.
- Codegen: `bun run --cwd frontend codegen` and `bun run --cwd functions codegen` (MCP Registry v1.0.0 spec).
- Frontend dev: `bun run --cwd frontend dev`.
- Functions dev: `bun run --cwd functions serve` (build + start Functions emulator).
- Emulators (all): `bunx firebase-tools emulators:start`.
- Build: `bun run --cwd frontend build` and `bun run --cwd functions build`.
- Deploy (hosting + functions): run at repo root `bun run deploy`.

## Coding Style & Naming
- Formatter/Linter: Biome (`bun run --cwd <dir> fmt`). Tabs for indent, double quotes, no unused imports/variables.
- TypeScript: `strict` enabled; `module`/`moduleResolution` are NodeNext.
- Naming: React components PascalCase; hooks `useXxx`; variables/functions camelCase. Files: components `.tsx`, utilities `.ts`.

## Commit & Pull Requests
- Use Conventional Commits: `feat: ...`, `fix: ...`, `chore: ...`, `refactor: ...`, `docs: ...` (e.g., `docs: add contributor guide`).
- Stage files explicitly (required):
  - `git add AGENTS.md` (never use `git add .`, `--all`, or `-A`).
- PRs include purpose/context, change summary, screenshots for UI changes, and linked issues.

## Security & Configuration Tips
- Frontend `.env` (example): set `VITE_FIREBASE_PROJECT_ID` and related `VITE_FIREBASE_*`. Do not commit secrets.
- The scheduled Function fetches the MCP Registry and updates Firestore collection `servers_v0`; avoid unnecessary writes to control cost and load.
